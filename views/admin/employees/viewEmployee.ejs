<!DOCTYPE html>
<html lang="en">

<%- include('../partials/header'); -%>


<body class="loading">

    <!-- Begin page -->
    <div id="wrapper">

        <%- include('../partials/dashboardHeader'); -%>


        <!-- ============================================================== -->
        <!-- Start Page Content here -->
        <!-- ============================================================== -->

        <div class="content-page">
            <div class="content">

                <!-- Start Content-->
                <div class="container-fluid">

                    <!-- start page title -->
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box">
                                <div class="page-title-right">
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a href="javascript: void(0);">Employee</a></li>
                                        <li class="breadcrumb-item"><a href="javascript: void(0);">Listing</a></li>
                                        <li class="breadcrumb-item active">View</li>
                                    </ol>
                                </div>
                                <h4 class="page-title">Profile</h4>
                            </div>
                        </div>
                    </div>
                    <!-- end page title -->

                    <div class="row">
                        <div class="col-lg-4 col-xl-4">
                            <div class="card-box text-center">
                                <!-- <img src="/dist/assets/images/users/user-1.jpg"
                                    class="rounded-circle avatar-lg img-thumbnail" alt="profile-image"> -->
                                    <% if (! data.image) { %>

                                        <img src="/dist/assets/images/users/user-1.jpg" class="rounded-circle img-thumbnail avatar-xl">
                                                      <% }else { %>
                                        <img src="<%-data.image %>"  alt="profile-image" class="rounded-circle img-thumbnail avatar-xl">
                                                          <% } %>
                                    

                                <h4 class="mb-0"> <%-data.firstName %> <%-data.lastName%></h4>
                                <!-- <p class="text-muted">@webdesigner</p> -->



                                <!-- <button type="button" class="btn btn-success btn-xs waves-effect mb-2 waves-light">Follow</button>
                                    <button type="button" class="btn btn-danger btn-xs waves-effect mb-2 waves-light">Message</button> -->

                                <div class="text-left mt-3">
                                    <!-- <h4 class="font-13 text-uppercase">About Me :</h4>
                                    <p class="text-muted font-13 mb-3">
                                        Hi I'm Johnathn Deo,has been the industry's standard dummy text ever since the
                                        1500s, when an unknown printer took a galley of type.
                                    </p> -->
                                    <p class="text-muted mb-2 font-13"><strong>Full Name :</strong> <span class="ml-2">
                                            <%-data.firstName %> <%-data.lastName%></span></p>

                                    <p class="text-muted mb-2 font-13"><strong>Mobile :</strong><span
                                            class="ml-2">+<%-data.countryCode %>
                                            <%-data.phoneNumber %></span></p>

                                    <p class="text-muted mb-2 font-13"><strong>Email :</strong> <span
                                            class="ml-2 "><%-data.email %></span></p>
                                    <p class="text-muted mb-2 font-13"><strong>D.O.B :</strong> <span
                                            class="ml-2 "><%-data.dob %></span></p>

                                    <p class="text-muted mb-1 font-13"><strong>Address :</strong> <span
                                            class="ml-2"><%-data.address %></span></p>
                                </div>

                            </div> <!-- end card-box -->

                            <div class="card-box">
                                <h4 class="header-title mb-3">Order Info</h4>

                                <div class="inbox-widget" data-simplebar style="max-height: 350px;">
                                    <div class="inbox-item">
                                        <p class="text-muted mb-2 font-13"><strong>Total Orders :</strong>
                                            <span id="totalOrders">0</span></p>
                                    </div>

                                    <div class="inbox-item">
                                        <p class="text-muted mb-2 font-13"><strong>Total Payment :</strong>
                                            <span id="totalPayment"><%-CURRENCY%> </span></p>
                                    </div>

                                  


                                </div>
                                <!-- end inbox-widget -->

                            </div> <!-- end card-box-->

                        </div> <!-- end col-->






                        <div class="col-lg-8 col-xl-8">
                            <div class="card-box">
                                <ul class="nav nav-pills navtab-bg nav-justified">
                                    <li class="nav-item">
                                        <a href="#justified-tabs-1" id="justified-tabs-11" title="Tab 1"
                                            data-toggle="tab" class="nav-link">
                                            <i class=" fas fa-pause"></i> Orders</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#justified-tabs-2" id="justified-tabs-22" title="Tab 2"
                                            data-toggle="tab" class="nav-link">
                                            <i class=" fas fa-star"></i>
                                            Ratings
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#justified-tabs-3" id="justified-tabs-33" title="Tab 2"
                                            data-toggle="tab" class="nav-link active">
                                            <i class=" fas fa-setting"></i>
                                            Setting
                                        </a>
                                    </li>
                                </ul>

                                <div class="tab-content">
                                    <div class="tab-pane" id="justified-tabs-1">

                                        <h5 class="mb-3 mt-4 text-uppercase"><i class="mdi mdi-cards-variant mr-1"></i>
                                            Orders</h5>

                                            <div class="row mb-2">
                                                <div class="col-lg-12">
                                                    <form class="form-inline">
                                                        <div class="form-group  mx-sm-1 mb-2">
                                                            <label for="inputPassword2" class="sr-only">Search</label>
                                                            <input type="search" class="form-control" id="search" name="search"
                                                                placeholder="Search...">
                                                        </div>
                                                        <div class="form-group  mx-sm-1 mb-2">
                                                            <label for="status-select" class="mr-2">Status</label>
                                                            <select class="custom-select" id="status-select">
                                                                <option value="" />All
                                                                <option value="0" />Pending
                                                                <option value="1" />Confirmed
                                                                <option value="2" />Cancelled-User
                                                                <option value="3" />Processing
                                                                <option value="3" />Cancelled-Company
                                                                <option value="5" />Completed
                                                            </select>
                                                        </div>
            
                                                        <div class="col-lg-2">
                                                            <div class="text-lg-left">
                                                                <a onclick="getFilter(1)" href="javascript:;"><button type="button"
                                                                        class="btn btn-light waves-effect mb-2">Filter</button></a>
                                                            </div>
                                                        </div><!-- end col-->
                                                    </form>
                                                </div>
            
                                            </div>


                                        <div class="table-responsive" id="justified-tabs-1">
                                            <table class="table table-borderless mb-0">
                                                <thead class="thead-light">
                                                    <tr>
                                                        <th style="width: 125px;">Order No</th>
                                                        <th style="width: 125px;">Customer Name</th>
                                                        <!-- <th style="width: 125px;">Service Date</th> -->
                                                        <th style="width: 150px;">Contact</th>
                                                        <th style="width: 100px;">Price</th>
                                                        <th style="width: 125px;">address </th>
                                                        <!-- <th style="width: 125px;">Order Date </th> -->
                                                        <th style="width: 150px;">Order Status </th>
                                                        <th style="width: 120px;">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="orderData">
                                                </tbody>
                                            </table>
                                        </div>

                                    </div><!-- end tab-pane -->
                                    <!-- end about me section content -->

                                    <div class="tab-pane" id="justified-tabs-2">

                                        <h5 class="mb-3 mt-4 text-uppercase"><i class="mdi mdi-cards-variant mr-1"></i>
                                            Ratings</h5>
                                        <div class="table-responsive" id="justified-tabs-1">
                                            <table class="table table-borderless mb-0">
                                                <thead class="thead-light">
                                                    <tr>
                                                        <th>OrderNo</th>
                                                        <th>User Name</th>
                                                        <th>User Photo</th>
                                                        <th>Rating</th>
                                                        <th>Review</th>
                                                        <th>Review At</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="ratingData">
                                                    <%for(var t=0;t<data.length;t++) {%>
                                                    <tr>
                                                        <td><%-ratings[t].order.orderNo%></td>

                                                        <td><%-ratings[t].order.user.firstName%></td>
                                                        <td><img src='<%((ratings[t].order!=null)?ratings[t].order.user.image :"" )%>'
                                                                alt="" width="90" height="70" /> </td>
                                                        <td> <%-ratings[t].rating +' '+commonMethods.getRating(ratings[t].rating)%>
                                                        </td>
                                                        <td><%-ratings[t].review%></td>
                                                        <td><%-commonMethods.format(new Date(ratings[t].ratingOn))%>
                                                        </td>
                                                        <td>

                                                            <a onclick="deleteReview('<%-ratings[t].userId%>')"
                                                                href="javascript:;" class="font-red" title="">
                                                                <i class="mdi mdi-delete"></i>
                                                                Delete
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    <%}%>                                              
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>


                                    <!-- end timeline content-->

                                    <div class="tab-pane show active " id="justified-tabs-3">


                                        <form role="form" onsubmit="return false" class="form-bordered" id="adduser">
                                            <!-- <form role="form" id="adduser" action="<%-adminpath%>employees/view/<%-data.id%>"
                                                    method="POST"> -->
                                                    <h5 class="mb-4 text-uppercase"><i
                                                            class="mdi mdi-account-circle mr-1"></i>
                                                        Personal Info</h5>
                                                    <input type="hidden" name="empId" id="empId" value="<%-data.id%>" />
                                                    <div class="row">
                                                        <div class="form-group col-md-6">
                                                            <label for="simpleinput">First Name</label>
                                                            <input type="text" id="firstName"
                                                                value="<%-data.firstName%>" name="firstName"
                                                                data-trigger="change" data-required="true"
                                                                class="form-control parsley-validated" />

                                                        </div>

                                                        <div class="form-group col-md-6">
                                                            <label for="example-email">Last Name</label>
                                                            <input type="text" id="lastName" value="<%-data.lastName%>"
                                                                name="lastName" data-trigger="change"
                                                                class="form-control parsley-validated" />

                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group col-md-6">
                                                            <label for="simpleinput">Email</label>
                                                            <input type="text" id="email" value="<%-data.email%>"
                                                                name="email" data-type="email" data-trigger="change"
                                                                data-required="true"
                                                                class="form-control parsley-validated" />
                                                        </div>

                                                        <div class="form-group col-md-6">
                                                            <label for="example-email">D.O.B</label>
                                                            <input type="text" id="dob" name="dob" autocomplete="off"
                                                                data-trigger="change" data-required="true"
                                                                value="<%-data.dob%>" class="form-control" />

                                                        </div>

                                                    </div>
                                                     <div class="row">
                                                        <div class="form-group col-md-12">
                                                            <label for="simpleinput">Role</label>
                                                             <select name="role" class=" form-control parsley-validated select2" id="role">
                                                                <% for(var i=0;i<roletypess.length;i++){ %>
<option value="<%- roletypess[i].id %>" <% if(data.role == roletypess[i].id){ %> selected <% } %>><%- roletypess[i].userType %></option>
                                                                <% } %>
                                                            </select>
                                                        </div>

                                                       

                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group col-md-3">
                                                            <label for="simpleinput">Country Code</label>
                                                            <input type="text" id="countryCode"
                                                                value="<%-data.countryCode%>" name="countryCode"
                                                                placeholder="91" data-trigger="change"
                                                                data-required="true"
                                                                class="form-control parsley-validated" />
                                                        </div>

                                                        <div class="form-group col-md-9">
                                                            <label for="example-email">Phone Number</label>
                                                            <input type="text" id="phoneNumber" name="phoneNumber"
                                                                value="<%-data.phoneNumber%>" data-trigger="change"
                                                                data-type="phone" data-required="true"
                                                                class="form-control parsley-validated" />

                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group col-md-6">
                                                            <label for="example-email">Id Proof Type:</label>
                                                            <input type="text" id="idProofName"
                                                                value="<%-data.idProofName%>" name="idProofName"
                                                                data-trigger="change"
                                                                class="form-control parsley-validated" />
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label for="example-email">Id Proof:</label>

                                                            <div class="form-input col-md-4">
                                                                <input type="file" id="idProof" name="idProof" />
                                                            </div>
                                                            <div class="form-group col-md-6"
                                                                <% if (data.idProof =="") {%> style="display :none" <%}%>  > 
                                                        <label>Uploaded Proof </label>
                                                        <div class="fm-admin-file">
                                                                <img id="myIcon" src="<%=data.idProof%>" alt="Icon"
                                                                style="width:50%;max-width:100px">

                                                            </div>
                                                        </div>
                                                    </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-md-6">
                                                <label for="simpleinput">Address</label>
                                                <textarea id="address" name="address" data-trigger="keyup"
                                                    data-rangelength="[10,200]"
                                                    class="form-control parsley-validated"><%-data.address%></textarea>
                                            </div>
                                        </div>

                                        <div class="text-right">
                                            <input type="hidden" name="superhidden" id="superhidden" />
                                            <button type="submit"
                                                class="btn btn-success waves-effect waves-light mt-2"><i
                                                    class="mdi mdi-content-save"></i> Save</button>
                                        </div>
                                        </form>
                                    </div>
                                    <!-- end settings content-->

                                </div> <!-- end tab-content -->
                            </div> <!-- end card-box-->

                        </div> <!-- end col -->
                    </div>
                    <!-- end row-->

                </div> <!-- container -->

            </div> <!-- content -->

            <!-- Footer Start -->
            <footer class="footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6">
                            2015 -
                            <script>document.write(new Date().getFullYear())</script> &copy; UBold theme by <a
                                href="">Coderthemes</a>
                        </div>
                        <div class="col-md-6">
                            <div class="text-md-right footer-links d-none d-sm-block">
                                <a href="javascript:void(0);">About Us</a>
                                <a href="javascript:void(0);">Help</a>
                                <a href="javascript:void(0);">Contact Us</a>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
            <!-- end Footer -->

        </div>

        <!-- ============================================================== -->
        <!-- End Page content -->
        <!-- ============================================================== -->


    </div>
    <!-- END wrapper -->

    <!-- Right bar overlay-->
    <div class="rightbar-overlay"></div>
    <%- include('../partials/script'); -%>



    <script type="text/javascript">
    $("#dob").flatpickr();
        $("#toDate").flatpickr();
        $('#search').on('keyup', function () {
                                    setTimeout(function () { getSearch(1) }, 800);
                                });


        //  $("#dob").datepicker();



        // $("#dob").datepicker({ maxDate: 1 });

        // $("#countryCode").intlTelInput({
        //     initialCountry: "in",
        // });
        // var input = document.querySelector("#countryCode");
        // input.addEventListener("countrychange", function () {
        //     $("#countryCode").val($("#countryCode").intlTelInput("getSelectedCountryData").dialCode);

        // });



        //$("#countryCode").intlTelInput("setNumber", $("#countryCode").val());


        $('#adduser').submit(function () {
            console.log('test here>>>>>>');


            var id = $('#empId').val()

            console.log('hi prati sharma>>>>>>', id);



            var tempform = $('#adduser');

            tempform.parsley('validate');

            if (tempform.parsley('isValid')) {

                var form_data = new FormData(tempform[0]);
                $("#loading1").show();
                $.ajax({
                    type: 'POST',
                    url: '<%-adminpath%>employees/update',
                    dataType: 'json',
                    data: form_data,
                    contentType: false,
                    cache: false,
                    processData: false,
                    success: function (response) {
                        $("#loading1").hide();
                        if (response.code == 200) {

                            //showToastSuccess(response.message)

                            // window.location.href = "<%-adminpath%>employees/view/" + id;
                            window.location.href = "<%-adminpath%>employees";


                        } else {
                            //showToastError(response.message)
                        }
                    },

                    error: function (response) {
                        $("#loading1").hide();
                        var errorResponse = JSON.parse(response.responseText)
                        //showToastError(errorResponse.message)


                    }
                });


            }
        });
        var currentPage = 1



        function getFilter(currentPage) {
            currentPage = currentPage
            var limit = 50
            $('#loading1').show()
            var status = $('#status').val();
            var fromDate = $('#fromDate').val();
            var toDate = $('#toDate').val();

            //alert(fromDate)
            $.ajax({
                type: 'POST',
                url: '<%-adminpath%>employees/orders',
                dataType: 'json',
                data: { 'fromDate': fromDate, 'progressStatus': status, 'toDate': toDate, 'page': currentPage, 'limit': limit, 'empId': '<%-data.id%>' },
                success: function (response) {
                    $('#loading1').hide()

                    if (response.code == '200') {

                        var row = "";
                        console.log('okkkkk', response)
                        $('#orderData').html('')
                        var data1 = response.body.data
                        var data = response.body.data.rows
                        for (var t = 0; t < data.length; t++) {


                            var status = "Pending"
                            if (data[t].progressStatus == "1") status = "Confirmed"
                            if (data[t].progressStatus == "2") status = "Cancelled"
                            if (data[t].progressStatus == "3") status = "Processing"
                            if (data[t].progressStatus == "4") status = "Cancelled-Comapny"
                            if (data[t].progressStatus == "5") status = "Completed"

                            // var btnBg = getOrderColor(data.progressStatus)

                            row = row + '<tr>' +
                                '			<td>' + data[t].orderNo + ' </td>' +
                                '			<td>' + data[t].user.firstName + " " + data[t].user.lastName + ' </td>' +
                                // '			<td>' + format(new Date(data[t].serviceDateTime)) + ' </td>' +
                                '            <td>' + data[t].user.countryCode + " " + data[t].user.phoneNumber + '</td>' +
                                '            <td>' + data[t].totalOrderPrice + '</td>' +
                                '            <td>' + data[t].address.houseNo + " " + data[t].address.addressName + " ," + data[t].address.city + '</td>' +
                                // '            <td>' + format(new Date(data[t].createdAt)) + '</td>' +
                                '			<td>' +
                                '<a href="javascript:;"   data-placement="bottom" id="block_status_' + data[t].id + '" >' +
                                '                <input type="hidden"  value="' + data[t].progressStatus + '" id="block_statusvalue_' + data[t].id + '">' +
                                '                <span class="button-content">' +
                                '                    <i class="glyph-icon icon-cog float-left"></i>' +
                                '<span id="block_statustext_' + data[t].id + '">' + status + ' <span>' +
                                '                </span>' +
                                '            </a>' + ' </td>' +
                                '<td>' +
                                '<a href="<%-adminpath%>orders/view/' + data[t].id + '" class="action-icon"> <i class="mdi mdi-eye"></i></a>' +
                                '<a onclick="return confirm(\'Are you sure you want to delete this?\');"  href="<%-adminpath%>orders/delete/' + data[t].id + '" data-id="' + data[t].id + '" title="" class="action-icon"> <i class="mdi mdi-delete"></i></a>' +
                                '</td>' +

                                '        </tr>';

                        }

                        if (row == "") {
                            $('#orderData').html('&nbsp;&nbsp;No records found')

                        }
                        else $('#orderData').html(row);
                        appendPagination(currentPage, Math.ceil(data1.count / limit))
                        appendStat(response.body.counts)

                    }
                    else {

                        // showToastError(response.message)
                    }
                },

                error: function (response) {
                    $('#loading1').hide()

                    // showToastError(response.message)

                }
            });
        }


        function getSearch(currentPage) {
                                    currentPage = currentPage
                                    var search = $('#search').val()
                                    var limit = 40
                                    $('#loading1').show()
                                    var status = $('#status').val();
                                    var fromDate = $('#fromDate').val();
                                    var toDate = $('#toDate').val();

                                    //alert(fromDate)
                                    $.ajax({
                                        type: 'POST',
                                        url: '<%-adminpath%>orders/search',
                                        dataType: 'json',
                                        data: { 'search': search, 'page': currentPage, 'limit': limit },
                                        success: function (response) {
                                            console.log('heloooooo>>>>', response)

                                            $('#loading1').hide()

                                            if (response.code == '200') {

                                                var row = "";
                                                console.log('order search>>>>', response)
                                                $('#orderData').html('')
                                                var data1 = response.body.data
                                                var data = response.body.data.rows
                                                for (var t = 0; t < data.length; t++) {


                                                    var status = "Pending"
                                                    var Payment = "Failed"
                                                    var paymentBg = "bg-red"
                                                    if (data[t].progressStatus == "1") status = "Confirmed"
                                                    if (data[t].progressStatus == "2") status = "Cancelled"
                                                    if (data[t].progressStatus == "3") status = "Processing"
                                                    if (data[t].progressStatus == "4") status = "Cancelled-Comapny"
                                                    if (data[t].progressStatus == "5") status = "Completed"

                                                    var btnBg = getOrderColor(data[t].progressStatus)
                                                    if (data[t].payment && data[t].payment.transactionStatus == "1") {
                                                        Payment = "Success"
                                                        paymentBg = "bg-green"
                                                    }


                                                    row = row + '<tr id="row_' + data[t].id + '">' +
                                                        '			<td>' + data[t].orderNo + ' </td>' +
                                                        '			<td>' + data[t].user.firstName + " " + data[t].user.lastName + ' </td>' +
                                                        '			<td>' + format(new Date(data[t].serviceDateTime)) + ' </td>' +
                                                        '            <td>' + data[t].user.countryCode + " " + data[t].user.phoneNumber + '</td>' +
                                                        '            <td>' + data[t].totalOrderPrice + '</td>' +
                                                        '            <td>' +
                                                        '             <a href="javascript:;"  class="btn ' + paymentBg + ' font-size-10 pad5A tooltip-button" data-placement="bottom" title="Open modal window"   >' +
                                                        '                <span class="button-content">' +
                                                        '                    <i class="glyph-icon icon-money float-left"></i>' +
                                                        '<span>' + Payment + ' <span>' +
                                                        '                </span>' +
                                                        '            </a></td>' +
                                                        '            <td>' + (data[t].address != null ? data[t].address.houseNo + " " + data[t].address.addressName + " ," + data[t].address.city : "") + '</td>' +
                                                        '            <td>' + format(new Date(data[t].createdAt)) + '</td>              ' +
                                                        '              ' +
                                                        '            <td>' +
                                                        '             <a href="javascript:;"  class="btn ' + btnBg + ' font-size-10 pad5A tooltip-button  black-modal-60" data-placement="bottom" title="Open modal window"  id="block_status_' + data[t].id + '"  onclick="showModal(\'' + data[t].id + '\',\'' + data[t].progressStatus + '\')" >' +
                                                        '                <input type="hidden"  value="' + data[t].progressStatus + '" id="block_statusvalue_' + data[t].id + '">' +
                                                        '                <span class="button-content">' +
                                                        '                    <i class="glyph-icon icon-cog float-left"></i>' +
                                                        '<span id="block_statustext_' + data[t].id + '">' + status + ' <span>' +
                                                        '                </span>' +
                                                        '            </a>' +
                                                        '             <div class="dropdown">' +
                                                        '                <a href="javascript:;" title="" class="btn small bg-blue dropdown-toggle" data-toggle="dropdown">' +
                                                        '                    <span class="button-content">' +
                                                        '                        <i class="glyph-icon font-size-11 icon-cog"></i>' +
                                                        '                        <i class="glyph-icon font-size-11 icon-chevron-down"></i>' +
                                                        '                    </span>' +
                                                        '                </a>' +
                                                        '                <ul class="dropdown-menu float-right">' +
                                                        '                    <li>' +
                                                        '                        <a href="<%-adminpath%>orders/view/' + data[t].id + '" title="">' +
                                                        '                            <i class="glyph-icon icon-edit mrg5R"></i>' +
                                                        '                            View' +
                                                        '                        </a>' +
                                                        '                    </li>' +
                                                        '                    <li class="divider"></li>' +
                                                        '                    <li>' +
                                                        '                        <a onclick="return confirm(\'Are you sure you want to delete this?\');"  href="<%-adminpath%>orders/delete/' + data[t].id + '" data-id="' + data[t].id + '" class="font-red" title="">' +
                                                        '                            <i class="mdi mdi-delete"></i>' +
                                                        '                            Delete' +
                                                        '                        </a>' +
                                                        '                    </li>' +
                                                        '                </ul>' +
                                                        '            </div>' +
                                                        '            </td>		' +
                                                        '        </tr>';

                                                }

                                                if (row == "") {
                                                    $('#orderData').html('&nbsp;&nbsp;&nbsp;No matching records found')

                                                }
                                                else $('#orderData').html(row);
                                                appendPagination(currentPage, Math.ceil(data1.count / limit))
                                                appendStat(response.body.counts)

                                            }
                                            else {

                                                // showToastError(response.message)
                                            }
                                        },

                                        error: function (response) {
                                            $('#loading1').hide()

                                            // showToastError(response.message)

                                        }
                                    });
                                }

        function appendPagination(currentPage, count) {
            var fd = "";
            //alert(data.pageCount);
            if (count > 1) {
                fd = fd + '<ul class="button-group center-div">';

                if (currentPage > 1) {
                    fd = fd + '<a  href="javascript:;" class="btn medium ui-state-default" onclick="getFilter(1)"><i class="glyph-icon icon-chevron-left"></i></a>';
                }
                else {
                    fd = fd + '<a  href="javascript:;" class="btn medium ui-state-default disabled"><i class="glyph-icon icon-chevron-left"></i></a>';

                }
                var i = 1;
                if (currentPage > 5) {
                    i = +currentPage - 4;
                }
                if (i !== 1) {
                    fd = fd + '<a  class="btn medium disabled ui-state-default" href="javascript:;">...</a>';
                }

                // alert(fd);


                for (i; i <= count; i++) {
                    if (currentPage == i) {
                        fd = fd + '<li class="btn medium ui-state-default primary-bg"><span><span>' + currentPage + '</span></span></li>';
                    } else {
                        fd = fd + '<a  class="btn medium  ui-state-default" href="javascript:;" onclick="getFilter(' + i + ')">' + i + '</a>';
                    }
                    if (i == (+currentPage + 4)) {
                        fd = fd + '<a  class="btn medium disabled ui-state-default" href="javascript:;">...</a>';
                        break;
                    }
                }


                if (currentPage != count) {
                    fd = fd + '<a  class="btn medium ui-state-default"  href="javascript:void(0)" onclick="getFilter(' + count + ')"> <i class="glyph-icon icon-chevron-right"></i></a>';
                }
                else {
                    fd = fd + '<a  class="btn medium ui-state-default disabled"  href="javascript:void(0)" > <i class="glyph-icon icon-chevron-right"></i></a>';
                }

                fd = fd + '</ul>';
            }

            $("#append_pagination").html(fd)
        }



        function appendStat(data) {
            console.log(data)
            var total = 0;
            var count = 0
            for (var k = 0; k < data.length; k++) {

                if (data[k].progressStatus == "0") {
                    $('#totalPendingCount').html(data[k].count)
                    $('#totalPendingSum').html(data[k].totalSum)
                }

                if (data[k].progressStatus == "1") {
                    $('#totalConfirmedCount').html(data[k].count)
                    $('#totalConfirmedSum').html(data[k].totalSum)
                }

                if (data[k].progressStatus == "2") {
                    $('#totalCancelledCount').html(data[k].count)
                    $('#totalCancelledSum').html(data[k].totalSum)
                }


                if (data[k].progressStatus == "3") {
                    $('#totalProcessingCount').html(data[k].count)
                    $('#totalProcessingSum').html(data[k].totalSum)
                }



                if (data[k].progressStatus == "5") {
                    $('#totalCompletedCount').html(data[k].count)
                    $('#totalCompletedSum').html(data[k].totalSum)
                }


                total = total + data[k].totalSum
                count = count + data[k].count
            }

            $('#totalPayment').html(total)
            $('#totalOrders').html(count)

        }







    </script>

    <!-- <script>
    showTab('justified-tabs-1', 'justified-tabs-2')
    getFilter(currentPage)

</script> -->

    <script>
        $(document).ready(function () {
            //   $("#hide").click(function(){
            //     $("p").hide();
            //   });
            $("#justified-tabs-11").click(function () {
                console.log('test order');
                $("#justified-tabs-1").show();
                getFilter(currentPage)
                $("#justified-tabs-2").hide();
                $("#justified-tabs-3").hide();
            });


            $("#justified-tabs-22").click(function () {
                $("#justified-tabs-2").show();
                $("#justified-tabs-1").hide();
                $("#justified-tabs-3").hide();
            });

            $("#justified-tabs-33").click(function () {
                $("#justified-tabs-3").show();
                $("#justified-tabs-1").hide();
                $("#justified-tabs-2").hide();
            });








        });
    </script>



</body>

</html>